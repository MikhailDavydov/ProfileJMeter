group 'com.psldebugger'
version '1.0-SNAPSHOT'

apply plugin: 'java'
apply plugin: 'eclipse'

eclipse {
    classpath {
        downloadJavadoc = true
        downloadSources = true
    }
}
sourceCompatibility = 1.8

repositories {
	mavenCentral()
	maven { url 'http://download.oracle.com/maven'}
	mavenLocal()
}

configurations {
	provided
	// Make compile extend from our provided configuration so that things added to bundled end up on the compile classpath
	compile.extendsFrom(provided)
}

dependencies {
	annotationProcessor("org.projectlombok:lombok:1.16.20")
	compileOnly("org.projectlombok:lombok:1.16.20")

	compile 'org.apache.jmeter:ApacheJMeter_java:4.0'
	compile 'org.apache.jmeter:ApacheJMeter_jdbc:4.0'
	compile group: 'org.jpos', name: 'jpos', version: '2.1.0'
	testCompile group: 'junit', name: 'junit', version: '4.12'
}

jar {
	from {
		configurations.provided.collect { it.isDirectory() ? it : zipTree(it) }
	}
}

task copySample(type:Copy,dependsOn:[build]) {

	copy {
		from project.buildDir.getPath()+'/libs/ProfileJMeter-1.0-SNAPSHOT.jar'
		into System.getenv('JMETER_HOME')+'/lib/ext'
	}
}
